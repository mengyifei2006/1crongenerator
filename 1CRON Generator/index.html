<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRON Generator - Free Online Cron Expression Tool</title>
    <meta name="description" content="Free online Cron expression generator. Create, test, and explain Cron jobs with a visual interface. Supports standard Linux Crontab syntax.">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        primary: {
                            50: '#eef2ff',
                            100: '#e0e7ff',
                            500: '#6366f1',
                            600: '#4f46e5',
                            700: '#4338ca',
                        }
                    }
                }
            }
        }
    </script>

    <!-- Alpine.js -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.3/dist/cdn.min.js"></script>
    
    <!-- Cronstrue -->
    <script src="https://unpkg.com/cronstrue@2.49.0/dist/cronstrue.min.js"></script>

    <!-- Google Analytics & AdSense (Preserved) -->
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XYTRKJDL8J"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-XYTRKJDL8J');
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1336697940295449" crossorigin="anonymous"></script>

    <!-- Schema Markup -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Cron Generator",
      "applicationCategory": "DeveloperApplication",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "description": "A visual tool to generate standard Linux Cron expressions."
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "What is a Cron expression?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "A Cron expression is a string comprising five or six fields separated by white space that represents a set of times, commonly used to schedule tasks on Unix-like systems."
        }
      }, {
        "@type": "Question",
        "name": "What are the 5 fields of Cron?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "The 5 standard fields are: Minute (0-59), Hour (0-23), Day of Month (1-31), Month (1-12), and Day of Week (0-6)."
        }
      }, {
        "@type": "Question",
        "name": "How do I handle timezones in Cron?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Cron jobs typically run in the system's local time. To handle timezones, you should ensure your server's timezone is set correctly or manage time conversions within your script."
        }
      }]
    }
    </script>

    <style>
        [x-cloak] { display: none !important; }
        .grid-btn-active {
            background-color: #4f46e5;
            color: white;
            box-shadow: 0 4px 6px -1px rgba(79, 70, 229, 0.3);
            transform: scale(1.05);
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 antialiased min-h-screen flex flex-col" x-data="cronApp()">

    <!-- Navbar -->
    <nav class="bg-white border-b border-slate-200 sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center gap-3">
                    <svg class="w-8 h-8 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <span class="font-bold text-xl tracking-tight text-slate-900">CronGenerator<span class="text-primary-600">.app</span></span>
                </div>
                <div class="hidden md:flex items-center space-x-6">
                    <a href="https://json2csv.app" class="text-slate-500 hover:text-primary-600 font-medium transition-colors" target="_blank">JSON to CSV</a>
                    <a href="https://jsonvalidator.app" class="text-slate-500 hover:text-primary-600 font-medium transition-colors" target="_blank">JSON Validator</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow w-full max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
        
        <!-- Tool Section -->
        <div class="bg-white rounded-2xl shadow-xl overflow-hidden border border-slate-100">
            
            <!-- Result Header -->
            <div class="bg-slate-900 text-white p-8 text-center relative overflow-hidden">
                <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-primary-500 via-purple-500 to-primary-500"></div>
                
                <div class="mb-2 text-slate-400 text-sm font-medium uppercase tracking-wider">Generated Expression</div>
                <div class="font-mono text-4xl sm:text-5xl md:text-6xl font-bold tracking-wider mb-4 text-white drop-shadow-lg" x-text="cronExpression"></div>
                
                <div class="flex items-center justify-center gap-2 mb-6">
                    <span class="inline-block w-2 h-2 rounded-full bg-green-400 animate-pulse"></span>
                    <p class="text-lg text-slate-300 font-medium" x-text="humanReadable"></p>
                </div>

                <button @click="copyToClipboard" class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-full shadow-sm text-slate-900 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 focus:ring-white transition-all transform hover:scale-105 active:scale-95">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
                    Copy to Clipboard
                </button>
            </div>

            <!-- Tabs & Presets -->
            <div class="p-4 sm:p-6 bg-slate-50 border-b border-slate-100 flex flex-col md:flex-row justify-between items-center gap-4">
                
                <!-- Tabs -->
                <div class="flex space-x-1 bg-white p-1 rounded-xl shadow-sm border border-slate-200 overflow-x-auto max-w-full">
                    <template x-for="tab in tabs" :key="tab">
                        <button 
                            @click="activeTab = tab"
                            :class="{'bg-primary-50 text-primary-700 font-semibold shadow-sm': activeTab === tab, 'text-slate-500 hover:text-slate-700 hover:bg-slate-50': activeTab !== tab}"
                            class="px-4 py-2 rounded-lg text-sm transition-all whitespace-nowrap"
                            x-text="tab"
                        ></button>
                    </template>
                </div>

                <!-- Presets Dropdown -->
                <div class="relative" x-data="{ open: false }">
                    <button @click="open = !open" @click.away="open = false" class="inline-flex justify-center w-full px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-md shadow-sm hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500">
                        <svg class="w-5 h-5 mr-2 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path></svg>
                        Common Templates
                        <svg class="w-5 h-5 ml-2 -mr-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                    </button>
                    <div x-show="open" class="absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-20" x-cloak x-transition>
                        <div class="py-1" role="menu" aria-orientation="vertical">
                            <template x-for="preset in presets" :key="preset.name">
                                <button @click="applyPreset(preset); open = false" class="block w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-100 hover:text-slate-900" role="menuitem" x-text="preset.name"></button>
                            </template>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Grid Content -->
            <div class="p-6 md:p-8">
                
                <!-- Quick Actions for Grid -->
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-lg font-semibold text-slate-900 flex items-center">
                        <span x-text="'Select ' + activeTab + 's'"></span>
                        <span class="ml-2 text-xs font-normal text-slate-500 bg-slate-100 px-2 py-1 rounded-full" x-text="getSelectionStatus(activeTab)"></span>
                    </h3>
                    <div class="space-x-2">
                        <button @click="selectAll(activeTab)" class="text-xs font-medium text-primary-600 hover:text-primary-700 hover:bg-primary-50 px-3 py-1.5 rounded-md transition-colors">Select All</button>
                        <button @click="clearAll(activeTab)" class="text-xs font-medium text-slate-500 hover:text-slate-700 hover:bg-slate-100 px-3 py-1.5 rounded-md transition-colors">Clear</button>
                    </div>
                </div>

                <!-- Minute Grid -->
                <div x-show="activeTab === 'Minute'" class="grid grid-cols-5 sm:grid-cols-10 gap-2" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 translate-y-2" x-transition:enter-end="opacity-100 translate-y-0">
                    <template x-for="i in 60" :key="i-1">
                        <button 
                            @click="toggle('minute', i-1)"
                            class="h-10 rounded-lg text-sm font-medium transition-all duration-200 border border-slate-100 hover:border-primary-200"
                            :class="isSelected('minute', i-1) ? 'grid-btn-active' : 'bg-slate-50 text-slate-600 hover:bg-slate-100'"
                            x-text="i-1"
                        ></button>
                    </template>
                </div>

                <!-- Hour Grid -->
                <div x-show="activeTab === 'Hour'" class="grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 gap-3" x-cloak>
                    <template x-for="i in 24" :key="i-1">
                        <button 
                            @click="toggle('hour', i-1)"
                            class="h-12 rounded-lg text-sm font-medium transition-all duration-200 border border-slate-100 hover:border-primary-200"
                            :class="isSelected('hour', i-1) ? 'grid-btn-active' : 'bg-slate-50 text-slate-600 hover:bg-slate-100'"
                        >
                            <span x-text="(i-1).toString().padStart(2, '0') + ':00'"></span>
                        </button>
                    </template>
                </div>

                <!-- Day (Date) Grid -->
                <div x-show="activeTab === 'Date'" class="grid grid-cols-7 gap-2" x-cloak>
                    <template x-for="i in 31" :key="i">
                        <button 
                            @click="toggle('dom', i)"
                            class="h-12 rounded-lg text-sm font-medium transition-all duration-200 border border-slate-100 hover:border-primary-200"
                            :class="isSelected('dom', i) ? 'grid-btn-active' : 'bg-slate-50 text-slate-600 hover:bg-slate-100'"
                        >
                            <span x-text="i"></span>
                            <span class="block text-[10px] opacity-60 font-normal" x-text="getOrdinal(i)"></span>
                        </button>
                    </template>
                </div>

                <!-- Month Grid -->
                <div x-show="activeTab === 'Month'" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4" x-cloak>
                    <template x-for="(month, index) in months" :key="index">
                        <button 
                            @click="toggle('month', index + 1)"
                            class="h-16 rounded-lg text-sm font-medium transition-all duration-200 border border-slate-100 hover:border-primary-200 flex flex-col items-center justify-center"
                            :class="isSelected('month', index + 1) ? 'grid-btn-active' : 'bg-slate-50 text-slate-600 hover:bg-slate-100'"
                        >
                            <span class="text-base font-bold" x-text="month"></span>
                            <span class="text-xs opacity-70" x-text="index + 1"></span>
                        </button>
                    </template>
                </div>

                <!-- Week Grid -->
                <div x-show="activeTab === 'Week'" class="grid grid-cols-2 sm:grid-cols-4 gap-4" x-cloak>
                    <template x-for="(day, index) in weekDays" :key="index">
                        <button 
                            @click="toggle('dow', index)"
                            class="h-16 rounded-lg text-sm font-medium transition-all duration-200 border border-slate-100 hover:border-primary-200 flex flex-col items-center justify-center"
                            :class="isSelected('dow', index) ? 'grid-btn-active' : 'bg-slate-50 text-slate-600 hover:bg-slate-100'"
                        >
                            <span class="text-base font-bold" x-text="day"></span>
                            <span class="text-xs opacity-70" x-text="'Day ' + index"></span>
                        </button>
                    </template>
                </div>

            </div>
        </div>

        <!-- SEO Content -->
        <div class="mt-16 prose prose-slate max-w-none">
            
            <section class="mb-12">
                <h2 class="text-3xl font-bold text-slate-900 mb-6">What is a Cron Expression?</h2>
                <p class="text-lg text-slate-600 leading-relaxed">
                    A Cron expression is a command string used to define a schedule for running tasks on Unix-like operating systems. It acts as a powerful time-based job scheduler, allowing developers and system administrators to automate repetitive tasks such as database backups, system maintenance, email notifications, and data processing scripts.
                </p>
                <p class="text-lg text-slate-600 leading-relaxed mt-4">
                    The beauty of Cron lies in its precision. With a simple string of five characters, you can schedule a task to run "every minute," "every Tuesday at 5 PM," or "on the first day of every month." Our visual <strong>Cron Generator</strong> removes the complexity of memorizing syntax, letting you build these schedules intuitively.
                </p>
            </section>

            <section class="mb-12">
                <h2 class="text-2xl font-bold text-slate-900 mb-6">Cron Fields Explained</h2>
                <div class="overflow-x-auto rounded-xl border border-slate-200 shadow-sm">
                    <table class="min-w-full divide-y divide-slate-200 bg-white">
                        <thead class="bg-slate-50">
                            <tr>
                                <th class="px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider">Order</th>
                                <th class="px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider">Field Name</th>
                                <th class="px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider">Allowed Values</th>
                                <th class="px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider">Description</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-200">
                            <tr><td class="px-6 py-4">1</td><td class="px-6 py-4 font-mono text-primary-600">Minute</td><td class="px-6 py-4">0 - 59</td><td class="px-6 py-4">The exact minute the task should run.</td></tr>
                            <tr><td class="px-6 py-4">2</td><td class="px-6 py-4 font-mono text-primary-600">Hour</td><td class="px-6 py-4">0 - 23</td><td class="px-6 py-4">The hour of the day (24-hour format).</td></tr>
                            <tr><td class="px-6 py-4">3</td><td class="px-6 py-4 font-mono text-primary-600">Day of Month</td><td class="px-6 py-4">1 - 31</td><td class="px-6 py-4">The specific date of the month.</td></tr>
                            <tr><td class="px-6 py-4">4</td><td class="px-6 py-4 font-mono text-primary-600">Month</td><td class="px-6 py-4">1 - 12</td><td class="px-6 py-4">The month of the year (1=Jan, 12=Dec).</td></tr>
                            <tr><td class="px-6 py-4">5</td><td class="px-6 py-4 font-mono text-primary-600">Day of Week</td><td class="px-6 py-4">0 - 6</td><td class="px-6 py-4">The day of the week (0=Sunday, 6=Saturday).</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <div class="grid md:grid-cols-2 gap-10 mb-12">
                <section>
                    <h2 class="text-2xl font-bold text-slate-900 mb-6">Special Characters Guide</h2>
                    <ul class="space-y-4">
                        <li class="flex items-start">
                            <span class="bg-slate-100 font-mono text-primary-700 px-2 py-1 rounded text-sm mr-3 mt-1">*</span>
                            <span class="text-slate-600"><strong>Asterisk:</strong> Represents "every" value. For example, a * in the Minute field means "every minute".</span>
                        </li>
                        <li class="flex items-start">
                            <span class="bg-slate-100 font-mono text-primary-700 px-2 py-1 rounded text-sm mr-3 mt-1">,</span>
                            <span class="text-slate-600"><strong>Comma:</strong> Separates a list of values. e.g., "MON,WED,FRI" runs on Monday, Wednesday, and Friday.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="bg-slate-100 font-mono text-primary-700 px-2 py-1 rounded text-sm mr-3 mt-1">-</span>
                            <span class="text-slate-600"><strong>Hyphen:</strong> Defines a range. e.g., "1-5" means from 1 to 5 inclusive.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="bg-slate-100 font-mono text-primary-700 px-2 py-1 rounded text-sm mr-3 mt-1">/</span>
                            <span class="text-slate-600"><strong>Slash:</strong> Specifies increments (steps). e.g., "*/15" in minutes means "every 15 minutes".</span>
                        </li>
                    </ul>
                </section>
                <section>
                    <h2 class="text-2xl font-bold text-slate-900 mb-6">Common Examples</h2>
                    <div class="bg-slate-900 rounded-xl overflow-hidden text-sm">
                        <div class="p-4 border-b border-slate-700 flex justify-between text-slate-400 font-medium">
                            <span>Expression</span>
                            <span>Meaning</span>
                        </div>
                        <div class="divide-y divide-slate-800">
                            <div class="p-4 flex justify-between items-center hover:bg-slate-800 transition-colors">
                                <code class="text-green-400 font-mono">*/5 * * * *</code>
                                <span class="text-slate-300">Every 5 minutes</span>
                            </div>
                            <div class="p-4 flex justify-between items-center hover:bg-slate-800 transition-colors">
                                <code class="text-green-400 font-mono">0 * * * *</code>
                                <span class="text-slate-300">Every hour at minute 0</span>
                            </div>
                            <div class="p-4 flex justify-between items-center hover:bg-slate-800 transition-colors">
                                <code class="text-green-400 font-mono">0 0 * * *</code>
                                <span class="text-slate-300">Every day at midnight</span>
                            </div>
                            <div class="p-4 flex justify-between items-center hover:bg-slate-800 transition-colors">
                                <code class="text-green-400 font-mono">0 9 * * 1</code>
                                <span class="text-slate-300">At 09:00 on Monday</span>
                            </div>
                            <div class="p-4 flex justify-between items-center hover:bg-slate-800 transition-colors">
                                <code class="text-green-400 font-mono">0 0 1 1 *</code>
                                <span class="text-slate-300">At 00:00 on Jan 1st</span>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <section class="mb-12 bg-indigo-50 rounded-2xl p-8 border border-indigo-100">
                <h2 class="text-2xl font-bold text-indigo-900 mb-6">Frequently Asked Questions</h2>
                <div class="space-y-6">
                    <div>
                        <h3 class="font-bold text-indigo-800 mb-2">Can I use 6 fields in Cron?</h3>
                        <p class="text-indigo-700/80">Standard Linux cron uses 5 fields. Some extended implementations (like Quartz scheduler in Java or AWS EventBridge) use 6 fields, adding a "Seconds" field at the beginning or "Year" at the end. This tool generates standard 5-field syntax compatible with most Linux servers.</p>
                    </div>
                    <div>
                        <h3 class="font-bold text-indigo-800 mb-2">How do I verify if my Cron job is running?</h3>
                        <p class="text-indigo-700/80">You can check your system logs, typically located at <code>/var/log/syslog</code> or <code>/var/log/cron</code>. Alternatively, you can pipe the output of your command to a log file or setup email alerts.</p>
                    </div>
                    <div>
                        <h3 class="font-bold text-indigo-800 mb-2">What does "2>&1" mean in a Cron command?</h3>
                        <p class="text-indigo-700/80">This is a shell redirect that sends Standard Error (stderr) to the same location as Standard Output (stdout). It ensures that if your script crashes, the error message is captured in your log file rather than being discarded or emailed separately.</p>
                    </div>
                </div>
            </section>
        </div>

    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-slate-200 mt-12">
        <div class="max-w-6xl mx-auto px-4 py-8 text-center text-slate-500 text-sm">
            <p>&copy; 2026 CronGenerator.app. All rights reserved.</p>
        </div>
    </footer>

    <!-- Toast Notification -->
    <div 
        x-data="{ show: false, message: '' }"
        @show-toast.window="show = true; message = $event.detail; setTimeout(() => show = false, 3000)"
        x-show="show"
        x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0 transform translate-y-2"
        x-transition:enter-end="opacity-100 transform translate-y-0"
        x-transition:leave="transition ease-in duration-200"
        x-transition:leave-start="opacity-100 transform translate-y-0"
        x-transition:leave-end="opacity-0 transform translate-y-2"
        class="fixed bottom-6 right-6 z-50 bg-slate-900 text-white px-6 py-3 rounded-lg shadow-xl flex items-center space-x-3"
        style="display: none;"
    >
        <svg class="w-6 h-6 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
        <span class="font-medium" x-text="message"></span>
    </div>

    <script>
        function cronApp() {
            return {
                tabs: ['Minute', 'Hour', 'Date', 'Month', 'Week'],
                activeTab: 'Minute',
                months: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                weekDays: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
                
                // State
                state: {
                    minute: [],
                    hour: [],
                    dom: [],
                    month: [],
                    dow: []
                },

                presets: [
                    { name: 'Every Minute', value: '* * * * *' },
                    { name: 'Every 5 Minutes', value: '*/5 * * * *' },
                    { name: 'Every 15 Minutes', value: '*/15 * * * *' },
                    { name: 'Every Hour', value: '0 * * * *' },
                    { name: 'Every Day at Midnight', value: '0 0 * * *' },
                    { name: 'Every Monday', value: '0 0 * * 1' },
                    { name: 'Every 1st of Month', value: '0 0 1 * *' }
                ],

                init() {
                    // Initialize with all fields empty (which implies *)
                    // If we want to be explicit, we could pre-fill, but empty = * is cleaner for UI
                    // To handle the "step" preset logic correctly, we need to know if the user is in "step mode" or "list mode".
                    // For simplicity, we decode presets into lists for the grid.
                    this.applyPreset(this.presets[1]); // Default to every 5 mins for demo? Or *?
                    // Let's default to * * * * *
                    this.applyPreset(this.presets[0]);
                },

                toggle(field, value) {
                    const list = this.state[field];
                    const index = list.indexOf(value);
                    if (index === -1) {
                        list.push(value);
                        list.sort((a, b) => a - b);
                    } else {
                        list.splice(index, 1);
                    }
                },

                isSelected(field, value) {
                    // If list is empty, it means "All" (*), but in visual grid, usually "All" means everything selected or nothing selected?
                    // Convention: 
                    // If visual grid has 0 selected -> output *
                    // If visual grid has items selected -> output those items
                    // So visually, if I see nothing selected, it means * (All).
                    // BUT, this is confusing. "Nothing selected" should mean "Never"? But Cron has no never.
                    // Let's invert: 
                    // Visual Grid: If logic is *, show ALL as selected? 
                    // If I show all as selected, and user wants to select only "5", they have to deselect 59 items? No.
                    // Better approach:
                    // Visual state matches Logic state.
                    // Logic: [] means *.
                    // Visual: If logic is [], show ALL keys as active? Or show None?
                    // If I show None, user thinks "Nothing".
                    // Let's make it explicit: 
                    // We have a helper `isWildcard(field)`.
                    // If `state[field].length === 0`, it is wildcard.
                    // If wildcard, we visually highlight ALL?
                    // Or we add a "Select All" toggle.
                    
                    // Decision: 
                    // If list is empty (Wildcard), I will return TRUE for all values to show them as active.
                    // BUT, if I click one, I want to switch to "Specific".
                    // So:
                    // If length == 0: return true (visually all active).
                    // When clicking:
                    // If length == 0 (all active):
                    //    Clicking '5' -> User probably wants JUST '5'. So we set state to [5].
                    //    Clicking '5' (if logic was all) -> switch to specific.
                    // If length > 0 (specific):
                    //    Clicking '5' -> toggle it.
                    //    If after toggle, list is empty -> goes back to wildcard (*).
                    
                    if (this.state[field].length === 0) return true;
                    return this.state[field].includes(value);
                },
                
                // Override toggle to handle the Wildcard transition
                toggle(field, value) {
                    // If currently wildcard (empty), and user clicks X, they want ONLY X.
                    if (this.state[field].length === 0) {
                        this.state[field] = [value];
                    } else {
                        // Currently specific
                        const index = this.state[field].indexOf(value);
                        if (index === -1) {
                            // Add
                            this.state[field].push(value);
                            this.state[field].sort((a, b) => a - b);
                            // If we selected ALL manually, does it become *?
                            // Let's check max lengths
                            const max = this.getMax(field);
                            if (this.state[field].length === max) {
                                this.state[field] = []; // Revert to implicit *
                            }
                        } else {
                            // Remove
                            this.state[field].splice(index, 1);
                            // If empty, it becomes * again.
                        }
                    }
                },

                selectAll(field) {
                    this.state[field] = []; // Empty implies *
                },

                clearAll(field) {
                    // Cron doesn't support "none", but for UI "Clear" might mean "reset to wildcard" or "select nothing"? 
                    // "Select Nothing" is invalid in Cron.
                    // So Clear All -> Reset to * (All) is the only logical action? 
                    // Or maybe clear to "0"? 
                    // Let's make "Clear" -> Reset to * (Select All).
                    // Wait, "Select All" button does the same?
                    // Let's change "Clear" to "Deselect All (Invalid state)"? No.
                    // Maybe "Clear" isn't needed if default is *.
                    // Let's make "Select All" set to *.
                    // Let's make "Clear" set to... single value 0?
                    // Actually, usually users want to reset.
                    this.state[field] = [];
                },

                getMax(field) {
                    if (field === 'minute') return 60;
                    if (field === 'hour') return 24;
                    if (field === 'dom') return 31;
                    if (field === 'month') return 12;
                    if (field === 'dow') return 7;
                    return 0;
                },

                getSelectionStatus(field) {
                    if (this.state[field].length === 0) return 'Every ' + field;
                    return this.state[field].length + ' selected';
                },

                get cronExpression() {
                    const f = (arr) => arr.length === 0 ? '*' : arr.join(',');
                    return `${f(this.state.minute)} ${f(this.state.hour)} ${f(this.state.dom)} ${f(this.state.month)} ${f(this.state.dow)}`;
                },

                get humanReadable() {
                    try {
                        return cronstrue.toString(this.cronExpression, { verbose: true });
                    } catch (e) {
                        return "Invalid Expression";
                    }
                },

                applyPreset(preset) {
                    // We need to parse the preset string into our state arrays
                    const parts = preset.value.split(' ');
                    if (parts.length !== 5) return;

                    const fields = ['minute', 'hour', 'dom', 'month', 'dow'];
                    
                    fields.forEach((field, i) => {
                        const part = parts[i];
                        if (part === '*') {
                            this.state[field] = [];
                        } else if (part.includes('/')) {
                            // Handle step e.g. */5 or 0/2
                            // Expand to list for grid
                            const [start, step] = part.includes('-') ? part.split('/')[1] : part.replace('*', '0').split('/');
                            // This is a bit complex parsing, simplified for standard presets
                            // If */5
                            if (part.startsWith('*/')) {
                                const stepVal = parseInt(part.split('/')[1]);
                                const max = this.getMax(field);
                                const arr = [];
                                for (let k = 0; k < max; k += stepVal) arr.push(k);
                                // For dom/month (1-based)
                                if (field === 'dom' || field === 'month') {
                                     // 1-based logic adjustment if needed, but usually */5 for minutes.
                                     // For simplicity, handle standard presets manually or generic expansion
                                }
                                this.state[field] = arr;
                            } else {
                                // fallback for 0-based steps
                                const stepVal = parseInt(part.split('/')[1]);
                                const max = this.getMax(field);
                                const arr = [];
                                for (let k = 0; k < max; k += stepVal) arr.push(k);
                                this.state[field] = arr;
                            }
                        } else if (part.includes(',')) {
                            this.state[field] = part.split(',').map(Number).sort((a,b)=>a-b);
                        } else if (part.includes('-')) {
                            // range
                             const [s, e] = part.split('-').map(Number);
                             const arr = [];
                             for(let k=s; k<=e; k++) arr.push(k);
                             this.state[field] = arr;
                        } else {
                            // Single number
                            this.state[field] = [parseInt(part)];
                        }
                    });
                },

                copyToClipboard() {
                    navigator.clipboard.writeText(this.cronExpression).then(() => {
                        window.dispatchEvent(new CustomEvent('show-toast', { detail: 'Copied to clipboard!' }));
                    });
                },

                getOrdinal(n) {
                    const s = ["th", "st", "nd", "rd"];
                    const v = n % 100;
                    return (s[(v - 20) % 10] || s[v] || s[0]);
                }
            }
        }
    </script>
</body>
</html>
